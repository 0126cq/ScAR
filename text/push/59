"function purchase(uint16 packCount, address referrer) whenNotPaused public payable {        require(packCount > 0);        require(referrer != msg.sender);        uint price = calculatePrice(basePrice(), packCount);        require(msg.value >= price);        Purchase memory p = Purchase({            user: msg.sender,            count: packCount,            commit: uint64(block.number),            randomness: 0,            current: 0        });        uint id = purchases.<mask0> - 1;        emit PacksPurchased(id, msg.sender, packCount);        if (referrer != address(0)) {            uint commission = price / 10;            referrer.transfer(commission);            price -= commission;            emit Referral(referrer, commission, msg.sender);        }        address(vault).transfer(price);     }"