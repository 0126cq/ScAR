"function safeTransferERC20WithBalanceCheck(        address _currency,        address _from,        address _to,        uint256 _amount    ) internal {        if (_from == _to) {            return;        }        uint256 balBefore = IERC20Upgradeable(_currency).balanceOf(_to);        bool success = _from == address(this)            ? IERC20Upgradeable(_currency).transfer(_to, _amount)            : IERC20Upgradeable(_currency).<mask0>;        uint256 balAfter = IERC20Upgradeable(_currency).balanceOf(_to);        require(success && (balAfter == balBefore + _amount), \"currency transfer failed.\");    }"