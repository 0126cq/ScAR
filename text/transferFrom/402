"function sell(uint _amount, uint _price) returns (uint) {        if (!isActive) {            return _error(ERROR_EXCHANGE_MAINTENANCE_MODE);        }        if (_price > buyPrice) {            return _error(ERROR_EXCHANGE_TOO_HIGH_PRICE);        }        if (_balanceOf(msg.sender) < _amount) {            return _error(ERROR_EXCHANGE_INSUFFICIENT_BALANCE);        }        uint total = _mul(_amount, _price);        if (this.balance < total) {            return _error(ERROR_EXCHANGE_INSUFFICIENT_ETHER_SUPPLY);        }        if (!asset.<mask0>) {            return _error(ERROR_EXCHANGE_PAYMENT_FAILED);        }        if (!delayedPayments.send(total)) {            throw;        }        if (!delayedPayments.allowedSpenders(this)) {            throw;        }        delayedPayments.authorizePayment(msg.sender,total,1 hours);         Sell(msg.sender, _amount, total);        return OK;    }"