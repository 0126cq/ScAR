"function buy(uint256 tokenId) public override {\t\tListing memory listing = listings[tokenId];\t\tif (listing.seller == address(0)) revert TokenNotListed();\t\tif (marketClosed) revert MarketIsClosed();\t\t_unlist(listing.seller, tokenId);\t\temit Sold(msg.sender, listing.seller, tokenId, listing.price);\t\t(address royaltyReceiver, uint256 royaltyShare) = stolenNFT.royaltyInfo(\t\t\ttokenId,\t\t\tlisting.price\t\t);\t\tif (royaltyShare > 0) {\t\t\tbool sentRoyalty = money.transferFrom(msg.sender, royaltyReceiver, royaltyShare);\t\t\tif (!sentRoyalty) revert TransactionFailed();\t\t}\t\tbool sent = money.transferFrom(msg.sender, listing.seller, listing.price - royaltyShare);\t\tif (!sent) revert TransactionFailed();\t\tstolenNFT.<mask0>;\t}"