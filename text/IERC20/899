"function migrate() external {      require(canMigrate, \"Funds not yet migrated\");      recordSmartContract();      address targetVault = address(lpToken);      uint256 remainingLegacyShares = (IERC20(sourceVault).totalSupply()).sub(IERC20(sourceVault).balanceOf(address(this)));      uint256 unmigratedNewShares = IERC20(targetVault).balanceOf(address(this)).sub(totalSupply());      uint256 userLegacyShares = IERC20(sourceVault).balanceOf(msg.sender);      require(userLegacyShares <= remainingLegacyShares, \"impossible for user legacy share to have more than the remaining legacy share\");      uint256 userEquivalentNewShares = userLegacyShares.mul(unmigratedNewShares).div(remainingLegacyShares);      <mask0>.safeTransferFrom(msg.sender, address(this), userLegacyShares);      migrateStakeFor(msg.sender, userEquivalentNewShares);      emit Migrated(msg.sender, userLegacyShares, userEquivalentNewShares);    }"