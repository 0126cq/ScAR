"function _buy(        address factory,        bytes32 initCode,        uint256 amountOut,        address[] calldata path    )        private        returns (uint256 tokensSold)    {        require(path.length > 1, \"More than 1 token required\");        bool tokensBoughtEth;        uint8 length = uint8(path.length);        uint256[] memory amounts = new uint256[](length);        address[] memory pairs = new address[](length - 1);        amounts[length - 1] = amountOut;        for (uint8 i = length - 1; i > 0; i--) {            (amounts[i - 1], pairs[i - 1]) = UniswapV3Lib.getAmountInAndPair(                factory,                amounts[i],                path[i-1],                path[i],                initCode            );        }        tokensSold = amounts[0];        for(uint8 i = 0; i < length - 1; i++) {            address tokenSold = path[i];            address tokenBought = path[i+1];            if (i == length - 2) {                if (tokenBought == ETH_IDENTIFIER) {                    tokenBought = WETH;                    tokensBoughtEth = true;                }            }            if (i == 0) {                if (tokenSold == ETH_IDENTIFIER) {                    tokenSold = WETH;                    TransferHelper.safeTransferETH(msg.sender, msg.value.sub(tokensSold));                    IWETH(WETH).deposit{value: tokensSold}();                    assert(IWETH(WETH).transfer(pairs[i], tokensSold));                }                else {                    transferTokens(                        tokenSold, msg.sender, pairs[i], tokensSold                    );                }            }            address receiver;            if (i == length - 2) {                if (tokensBoughtEth) {                    receiver = address(this);                }                else {                    receiver = msg.sender;                }            }            else {                receiver = pairs[i+1];            }            (address token0,) = UniswapV3Lib.sortTokens(tokenSold, tokenBought);            (uint256 amount0Out, uint256 amount1Out) = tokenSold == token0 ? (uint256(0), amounts[i+1]) : (amounts[i+1], uint256(0));            IUniswapV2Pair(pairs[i]).swap(                amount0Out, amount1Out, receiver, new bytes(0)            );        }        if (tokensBoughtEth) {            IWETH(WETH).<mask0>;            TransferHelper.safeTransferETH(msg.sender, amountOut);        }    }"