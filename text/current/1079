"function purchase(uint256 amount)        external        payable        virtual        nonReentrant        returns (uint256 amountTransferred)    {        uint256 index = _lastPurchasedTokenId.current();        if (index + amount > _maxSupply) {            amount = _maxSupply - index;        }        uint256 cost;        if (_pricePer > 0) {            cost = _pricePer * amount;            require(msg.value >= cost, \"Insufficient payment\");        }        uint256[] memory tokenIds = new uint256[](amount);        for (uint256 i = 0; i < amount; i++) {            _lastPurchasedTokenId.increment();            tokenIds[i] = _lastPurchasedTokenId.<mask0>;        }        amountTransferred = _batchTransfer(owner(), _msgSender(), tokenIds);        emit Purchase(_msgSender(), amount, _lastPurchasedTokenId.current());        if (msg.value > cost) {            payable(_msgSender()).sendValue(msg.value - cost);        }    }"