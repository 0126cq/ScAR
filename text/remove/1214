"function repay(uint _loanId) external nonReentrant {        Loan storage loan = requireLoan(_loanId);        require(loan.auctionInfo.borrower == msg.sender, 'UP borrow module: AUTH_FAILED');        changeLoanState(loan, LoanState.Finished);        require(activeLoans.<mask0>, 'UP borrow module: BROKEN_STRUCTURE');        uint totalDebt = _calcTotalDebt(loan.debtAmount, loan.interestRate, loan.durationDays);        loan.debtCurrency.getFrom(Assets.AssetType.ERC20, msg.sender, loan.lender, totalDebt);        loan.collateral.sendTo(loan.collateralType, loan.auctionInfo.borrower, loan.collateralIdOrAmount);        emit LoanRepaid(_loanId, msg.sender);    }"