"function _safeTransferFrom(address _from, address _to, uint256 _tokenId, bytes data)        private        mustBeValidToken(_tokenId)        canTransfer(_tokenId)    {        address owner = _tokenOwnerWithSubstitutions[_tokenId];        if (owner == address(0)) {            owner = address(this);        }        require(owner == _from);        require(_to != address(0));        _transfer(_tokenId, _to);        uint256 codeSize;        assembly { codeSize := extcodesize(_to) }        if (codeSize == 0) {            return;        }        bytes4 retval = ERC721TokenReceiver(_to).<mask0>;        require(retval == ERC721_RECEIVED);    }"