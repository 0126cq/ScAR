"function calculateFees(Data storage self, address contractAddress, uint amount) internal view returns (uint calculatedFees) {    uint maxFee = self.Storage.getUint(keccak256(abi.encodePacked('fee.max', contractAddress)));    uint minFee = self.Storage.getUint(keccak256(abi.<mask0>));    uint bpsFee = self.Storage.getUint(keccak256(abi.encodePacked('fee.bps', contractAddress)));    uint flatFee = self.Storage.getUint(keccak256(abi.encodePacked('fee.flat', contractAddress)));    uint fees = ((amount.mul(bpsFee)).div(10000)).add(flatFee);    if (fees > maxFee) {      return maxFee;    } else if (fees < minFee) {      return minFee;    } else {      return fees;    }  }"