"function mint(uint amountIn) external notPaused issuanceActive {        require(amountIn <= token.allowance(msg.sender, address(this)), \"Allowance not high enough\");        require(amountIn <= token.balanceOf(msg.sender), \"Balance is too low\");        require(!exchangeRates().rateIsInvalid(currencyKey), \"Currency rate is invalid\");        uint currentCapacity = capacity();        require(currentCapacity > 0, \"Contract has no spare capacity to mint\");        uint actualAmountIn = currentCapacity < amountIn ? currentCapacity : amountIn;        (uint feeAmountTarget, bool negative) = calculateMintFee(actualAmountIn);        uint mintAmount = negative ? actualAmountIn.add(feeAmountTarget) : actualAmountIn.sub(feeAmountTarget);        bool success = _safeTransferFrom(address(token), msg.sender, address(this), actualAmountIn);        require(success, \"Transfer did not succeed\");        <mask0>;        emit Minted(msg.sender, mintAmount, negative ? 0 : feeAmountTarget, actualAmountIn);    }"