"function upgrade(uint256 value) public {      UpgradeState state = getUpgradeState();      if(!(state == UpgradeState.ReadyToUpgrade || state == UpgradeState.Upgrading)) {        throw;      }      if (value == 0) throw;      balances[msg.sender] = safeSub(balances[msg.sender], value);      totalSupply = <mask0>;      totalUpgraded = safeAdd(totalUpgraded, value);      upgradeAgent.upgradeFrom(msg.sender, value);      Upgrade(msg.sender, upgradeAgent, value);  }"